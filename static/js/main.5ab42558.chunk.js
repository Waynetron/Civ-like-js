(this["webpackJsonpuntitled-civ-like"]=this["webpackJsonpuntitled-civ-like"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t){},,function(e,t){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i,a,s,o,r=n(2),c=n.n(r),l=n(7),u=n.n(l),d=(n(12),n(3)),f=n(1),v=n.n(f),b=n.p+"static/media/forest.6aa768e8.svg",h=n.p+"static/media/castle.a326f42e.svg",g=n.p+"static/media/mountain.94073b47.svg",p=n.p+"static/media/num1.371ec2e2.svg",m=n.p+"static/media/num2.a56ff6e2.svg",j=n.p+"static/media/num3.da848c9d.svg",x=n.p+"static/media/num4.944e5e39.svg",O=n.p+"static/media/num5.ff5af1a8.svg",w=n.p+"static/media/num6.13bde0f9.svg",k=n.p+"static/media/skeleton.04605ff3.svg",y=n.p+"static/media/skeleton-hover.fe033f88.svg",C=n.p+"static/media/skeleton-selected.240417a9.svg",M=n.p+"static/media/rabbit.6a371796.svg",P=n.p+"static/media/rabbit-hover.7c84ddc9.svg",F=n.p+"static/media/rabbit-selected.b150d05f.svg",G={},B=n(6),E=65*Math.sin(60*Math.PI/180),S=10*E,I=["grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","forest","forest","forest","forest","forest","forest","mountain","mountain","mountain","mountain","castle"],L=function(e,t,n,i,a){var s=function(e){var t=G[e].clone(),n=G["".concat(e,"Hover")].clone(),i=G["".concat(e,"Selected")].clone();return i.visible=!1,n.visible=!1,[t,n,i]}(e),o=Object(d.a)(s,3),r=o[0],c=o[1],l=o[2],u=new v.a.Group({applyMatrix:!1}),f=new v.a.Group({applyMatrix:!1});f.addChildren([l,r,c]),f.position=new v.a.Point(0,0),u.addChild(f),u.position=n;var b={type:e,team:t,group:u,image:r,selectedImage:l};return b.getPosition=function(){return u.position},b.moveTo=function(e){u.position=e},b.moveable={speed:1},b.select=function(){l.visible=!0,f.scaling=new v.a.Point(1.2,1.2),f.tween({scaling:[1.1,1.1]},{easing:"easeInOutCubic",duration:120})},b.deselect=function(){l.visible=!1,r.visible=!0,c.visible=!1,f.scaling=new v.a.Point(.9,.9),f.tween({scaling:[1,1]},{easing:"easeInOutCubic",duration:120})},u.onMouseEnter=function(e){r.visible=!1,c.visible=!0},u.onMouseLeave=function(e){i.selected!==b&&(r.visible=!0,c.visible=!1)},u.onClick=function(e){i.selected===b?(a(null),b.deselect()):(a(b),b.select())},b},T={black:"black",white:"white",yellow:"#FFD25D",lightYellow:"#FFF2CE",lightGrey:"#EEE",darkGrey:"#BBB"},W=function(e,t,n,i,a,s){var o=Object(d.a)(e,2),r=o[0],c=o[1],l=function(){var e=Math.floor(Math.random()*I.length);return I[e]}(),u={type:l,image:function(e,t,n){if("grass"===n)return null;var i=G[n].clone();return i.locked=!0,i.translate(e-i.bounds.width/2,t-i.bounds.height/2),i}(r,c,l),getPosition:function(){return e},select:function(){u.hex.strokeColor=T.yellow,u.hex.strokeWidth=5,u.hex.bringToFront()},deselect:function(){u.hex.strokeColor=T.lightGrey,u.hex.fillColor=T.white,u.hex.strokeWidth=2},hover:function(){var e,n,i;t.selected!==u&&(u.hex.strokeColor=T.lightYellow,u.hex.strokeWidth=5,u.hex.bringToFront()),null===(e=t.selected)||void 0===e||null===(n=e.hex)||void 0===n||n.bringToFront(),null===(i=t.selected)||void 0===i||i.moveable}};return u.hex=function(e,t,n){return new v.a.Path.RegularPolygon({center:[e,t],sides:6,radius:n,strokeColor:T.lightGrey,fillColor:T.white,strokeWidth:2,rotation:90,applyMatrix:!1})}(r,c,65),u.hex.onMouseEnter=function(e){u.hover()},u.hex.onMouseLeave=function(e){t.selected!==u&&u.deselect()},u.hex.onClick=function(e){if(t.selected===u)u.hex.strokeColor=T.darkGrey,u.hex.strokeWidth=2,n(null);else if(null===t.selected)n(u),u.select();else if(t.selected.moveable){var o=t.selected,r=(t.units,null);r?!function(e,t){return e.team!==t.team}(o,r)?s():a(o,r,u):i(t.selected,u)}else n(u),u.select()},u},N={selected:null,tiles:[],units:[]},D=function(e,t){return[195*e-585+(t%2===0?97.5:0),0-S/2+t*E]},H=function(e){v.a.project.clear(),i=new v.a.Group({applyMatrix:!1}),a=new v.a.Group({applyMatrix:!1}),s=new v.a.Group({applyMatrix:!1}),(o=new v.a.Group({applyMatrix:!1})).addChildren([i,a,s]);var t=function(t){var n;null===(n=N.selected)||void 0===n||n.deselect(),e(t),N.selected=t};N.tiles=function(e,t){for(var n=[],i=0;i<10;i++)for(var a=0;a<6;a++){var s=D(a,i);n.push(W(s,N,e,t))}return n}(t,(function(e,n){e.moveTo(n.getPosition()),t(null)}));var n,r=Object(B.a)(N.tiles);try{for(r.s();!(n=r.n()).done;){var c=n.value;i.addChild(c.hex),c.image&&a.addChild(c.image)}}catch(f){r.e(f)}finally{r.f()}N.units=function(e){var t=[],n=L("skeleton","yellow",D(0,1),N,e);t.push(n);var i=L("rabbit","red",D(3,5),N,e);return t.push(i),t}(t);var l,u=Object(B.a)(N.units);try{for(u.s();!(l=u.n()).done;){var d=l.value;s.addChild(d.group)}}catch(f){u.e(f)}finally{u.f()}o.translate(new v.a.Point(v.a.view.bounds.width/2,v.a.view.bounds.height/2)),v.a.view.onMouseDrag=function(e){o.translate(e.delta)},v.a.view.draw()},J=(n(16),n(0));var R=function(e){var t=e.startBattle,n=Object(r.useState)(null),i=Object(d.a)(n,2),a=i[0],s=i[1];return Object(r.useEffect)((function(){H(s)}),[]),Object(J.jsx)("div",{className:"map-container",children:a&&Object(J.jsxs)("div",{className:"selection-info",children:[Object(J.jsxs)("h2",{children:["Selected: ",a.type]}),Object(J.jsx)("button",{onClick:t,children:"Build unit"})]})})};n(18);var Y=function(e){var t=e.finishBattle;return Object(r.useEffect)((function(){v.a.project.clear()}),[]),Object(J.jsxs)("div",{className:"battle-container",children:[Object(J.jsx)("h1",{children:"Battle"}),Object(J.jsx)("button",{onClick:function(){return t("Player wins")},children:"Win"}),Object(J.jsx)("button",{onClick:function(){return t("Player loses")},children:"Lose"})]})};n(19);var z=function(){var e=Object(r.useRef)(),t=Object(r.useState)(!1),n=Object(d.a)(t,2),i=n[0],a=n[1],s=Object(r.useState)("map"),o=Object(d.a)(s,2),c=o[0],l=o[1];return Object(r.useEffect)((function(){v.a.setup(e.current),function(e){for(var t=e.onComplete,n={forest:b,castle:h,mountain:g,num1:p,num2:m,num3:j,num4:x,num5:O,num6:w,skeleton:k,skeletonHover:y,skeletonSelected:C,rabbit:M,rabbitHover:P,rabbitSelected:F},i=function(){var e=Object(d.a)(s[a],2),i=e[0],o=e[1];v.a.project.importSVG(o,{onLoad:function(e){e.applyMatrix=!1,G[i]=e,Object.entries(G).length===Object.entries(n).length&&t()},insert:!1})},a=0,s=Object.entries(n);a<s.length;a++)i()}({onComplete:function(){return a(!0)}})}),[a]),Object(J.jsxs)("div",{className:"App",children:[Object(J.jsx)("div",{className:"UI",children:i?Object(J.jsxs)(J.Fragment,{children:["map"===c&&Object(J.jsx)(R,{startBattle:function(){l("battle")}}),"battle"===c&&Object(J.jsx)(Y,{finishBattle:function(e){console.log(e),l("map")}})]}):Object(J.jsx)("p",{children:"Loading"})}),Object(J.jsx)("canvas",{ref:e,id:"canvas",resize:"true"})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),s(e),o(e)}))};u.a.render(Object(J.jsx)(c.a.StrictMode,{children:Object(J.jsx)(z,{})}),document.getElementById("root")),A()}],[[20,1,2]]]);
//# sourceMappingURL=main.5ab42558.chunk.js.map